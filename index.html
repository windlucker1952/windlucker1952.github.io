<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title></title>
<style>
  body {
    font-family: 'Arial Rounded MT Bold', Helvetica, Arial, sans-serif;
    background-color: #000000;
    
    
    background-image: url(омо.jpg);
    background-size: cover;        
      background-repeat: no-repeat;  
      background-position: center;   
      background-attachment: fixed;  /*ЛОГО тайм ту рейс*/
    
    padding: 20px; 
  }

  h1 {
    text-align: center;
    margin-bottom: 30px;
    font-size: 2em;
    color: rgb(241,250,253); /* яркий цвет для заголовка */
    text-shadow: 100px white;
  }

  .timers-container {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    justify-content: center;
  }

  .timer {
    background: linear-gradient(135deg, #131414, #1f204486);
    border-radius: 15px;
    padding: 15px;
    width: 220px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.301);
    border: 2px solid #333;
    transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.3s;
    margin: 0.3em;
  }

  .timer:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.5);
  }

  .timer-display {
    font-size: 2.2em;
    text-align: center;
    font-weight: bold;
    margin-bottom: 10px;
    font-family: 'Courier New', monospace;
    color: rgb(241,250,253); /* белый цвет для цифр */
    /*-webkit-text-stroke: 0.01em black;*/
  }

  .buttons {
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
  }

  button {
    flex: 1;
    margin: 0 3px;
    padding: 8px 12px;
    font-size: 0.9em;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    background-color: #444; /* темный цвет для кнопок */
    color: rgb(241,250,253); /* белый текст */
    transition: background-color 0.3s, transform 0.1s;
  }

  button:hover {
    background-color: #222; /* чуть более темный при наведении */
    transform: scale(1.05);
  }

  /* Стиль для старт/пауза/сброс */
  .control-btn {
    flex: 1;
    margin: 0 3px;
    padding: 8px 12px;
    font-size: 0.9em;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    transition: background-color 0.3s, transform 0.1s;
  }
  .start-btn {
    background: linear-gradient(135deg, #00b09b, #01c733);
  }
  .start-btn:hover {
    background: linear-gradient(135deg, #96c93d, #00b09b);
    transform: scale(1.05);
  }
  .pause-btn {
    background: linear-gradient(135deg, #ac6714, #ebc908);
  }
  .pause-btn:hover {
    background: linear-gradient(135deg, #ffd700, #77460a);
    transform: scale(1.05);
  }
  .reset-btn {
    background: linear-gradient(135deg, #e52d27, #660b0e);
  }
  .reset-btn:hover {
    background: linear-gradient(135deg, #b31217, #e52d27);
    transform: scale(1.05);
  }
 .timer-title {
  text-align: center;
  font-size: 1.2em;
  margin-bottom: 6px;
  margin-top: 0px;
  color: rgb(241,250,253);
}
.group {
  display: flex;
  flex-wrap: wrap; /* или nowrap, если хотите один ряд */
  justify-content: center; /* или flex-start / space-between */
  margin-bottom: 50px; /* расстояние между группами */
}
.numbers {
    color: #d12205;
    font-size: 1.4em;
    
}

</style>
</head>
<body>

<h1>Time <span style="color: #b21d04">2</span> Race</h1>
<div class="timers-container">
<Div class="group" id="group1"> 
  <!-- Таймеры 1-4, пример -->
  <div class="timer" id="timer1">
  <h2 class="timer-title"> # <span class="numbers">1</span> PRO</h2>
    <div class="timer-display" id="display1">00:00:00</div>
    <div class="buttons">
      <button onclick="addMinute(1)">+1м</button>
      <button onclick="addTenMinutes(1)">+10м</button>
      <button onclick="addHour(1)">+1ч</button>
      
    </div>
    <div class="controls" style="display:flex; gap:5px;">
      <button class="start-btn" onclick="startTimer(1)">Старт</button>
      <button class="pause-btn" onclick="pauseTimer(1)">Пауза</button>
      <button class="reset-btn" onclick="resetTimer(1)">Сброс</button>
    </div>
  </div>
  
  <div class="timer" id="timer2">
      <h2 class="timer-title"> # <span class="numbers">2</span> PRO</h2>
    <div class="timer-display" id="display2">00:00:00</div>
    <div class="buttons">
      <button onclick="addMinute(2)">+1м</button>
      <button onclick="addTenMinutes(2)">+10м</button>
      <button onclick="addHour(2)">+1ч</button>
    </div>
    <div class="controls" style="display:flex; gap:5px;">
      <button class="start-btn" onclick="startTimer(2)">Старт</button>
      <button class="pause-btn" onclick="pauseTimer(2)">Пауза</button>
      <button class="reset-btn" onclick="resetTimer(2)">Сброс</button>
    </div>
  </div>
  
   <div class="timer" id="timer3">
       <h2 class="timer-title"> # <span class="numbers">3</span> PRO</h2>
    <div class="timer-display" id="display3">00:00:00</div>
    <div class="buttons">
      <button onclick="addMinute(3)">+1м</button>
      <button onclick="addTenMinutes(3)">+10м</button>
      <button onclick="addHour(3)">+1ч</button>
    </div>
    <div class="controls" style="display:flex; gap:5px;">
      <button class="start-btn" onclick="startTimer(3)">Старт</button>
      <button class="pause-btn" onclick="pauseTimer(3)">Пауза</button>
      <button class="reset-btn" onclick="resetTimer(3)">Сброс</button>
    </div>
  </div>
  
  <div class="timer" id="timer4">
      <h2 class="timer-title"> # <span class="numbers">4</span> PRO</h2>
    <div class="timer-display" id="display4">00:00:00</div>
    <div class="buttons">
      <button onclick="addMinute(4)">+1м</button>
      <button onclick="addTenMinutes(4)">+10м</button>
      <button onclick="addHour(4)">+1ч</button>
    </div>
    <div class="controls" style="display:flex; gap:5px;">
      <button class="start-btn" onclick="startTimer(4)">Старт</button>
      <button class="pause-btn" onclick="pauseTimer(4)">Пауза</button>
      <button class="reset-btn" onclick="resetTimer(4)">Сброс</button>
    </div>
  </div>
  
  <div class="timer" id="timer5">
      <h2 class="timer-title"> # <span class="numbers">5</span> PRO</h2>
    <div class="timer-display" id="display5">00:00:00</div>
    <div class="buttons">
      <button onclick="addMinute(5)">+1м</button>
      <button onclick="addTenMinutes(5)">+10м</button>
      <button onclick="addHour(5)">+1ч</button>
    </div>
    <div class="controls" style="display:flex; gap:5px;">
      <button class="start-btn" onclick="startTimer(5)">Старт</button>
      <button class="pause-btn" onclick="pauseTimer(5)">Пауза</button>
      <button class="reset-btn" onclick="resetTimer(5)">Сброс</button>
    </div>
  </div>
  


  </Div>
  

  <div class="group" id="group2">
    
  <div class="timer" id="timer6">
    <h2 class="timer-title"> # <span class="numbers">6</span> STD</h2>
    <div class="timer-display" id="display6">00:00:00</div>
    <div class="buttons">
      <button onclick="addMinute(6)">+1м</button>
      <button onclick="addTenMinutes(6)">+10м</button>
      <button onclick="addHour(6)">+1ч</button>
    </div>
    <div class="controls" style="display:flex; gap:5px;">
      <button class="start-btn" onclick="startTimer(6)">Старт</button>
      <button class="pause-btn" onclick="pauseTimer(6)">Пауза</button>
      <button class="reset-btn" onclick="resetTimer(6)">Сброс</button>
    </div>
  </div>
  <div class="timer" id="timer7">
  <h2 class="timer-title"> # <span class="numbers">7</span> STD</h2>
    <div class="timer-display" id="display7">00:00:00</div>
    <div class="buttons">
      <button onclick="addMinute(7)">+1м</button>
      <button onclick="addTenMinutes(7)">+10м</button>
      <button onclick="addHour(7)">+1ч</button>
    </div>
    <div class="controls" style="display:flex; gap:5px;">
      <button class="start-btn" onclick="startTimer(7)">Старт</button>
      <button class="pause-btn" onclick="pauseTimer(7)">Пауза</button>
      <button class="reset-btn" onclick="resetTimer(7)">Сброс</button>
    </div>
  </div>
  <div class="timer" id="timer8">
  <h2 class="timer-title"> # <span class="numbers">8</span> STD</h2>
    <div class="timer-display" id="display8">00:00:00</div>
    <div class="buttons">
      <button onclick="addMinute(8)">+1м</button>
      <button onclick="addTenMinutes(8)">+10м</button>
      <button onclick="addHour(8)">+1ч</button>
    </div>
    <div class="controls" style="display:flex; gap:5px;">
      <button class="start-btn" onclick="startTimer(8)">Старт</button>
      <button class="pause-btn" onclick="pauseTimer(8)">Пауза</button>
      <button class="reset-btn" onclick="resetTimer(8)">Сброс</button>
    </div>
  </div>
  <div class="timer" id="timer9">
  <h2 class="timer-title"> # <span class="numbers">9</span> STD</h2>
    <div class="timer-display" id="display9">00:00:00</div>
    <div class="buttons">
      <button onclick="addMinute(9)">+1м</button>
      <button onclick="addTenMinutes(9)">+10м</button>
      <button onclick="addHour(9)">+1ч</button>
    </div>
    <div class="controls" style="display:flex; gap:5px;">
      <button class="start-btn" onclick="startTimer(9)">Старт</button>
      <button class="pause-btn" onclick="pauseTimer(9)">Пауза</button>
      <button class="reset-btn" onclick="resetTimer(9)">Сброс</button>
    </div>
  </div>
  <div class="timer" id="timer10">
  <h2 class="timer-title"> # <span class="numbers">10</span> STD</h2>
    <div class="timer-display" id="display10">00:00:00</div>
    <div class="buttons">
      <button onclick="addMinute(10)">+1м</button>
      <button onclick="addTenMinutes(10)">+10м</button>
      <button onclick="addHour(10)">+1ч</button>
    </div>
    <div class="controls" style="display:flex; gap:5px;">
      <button class="start-btn" onclick="startTimer(10)">Старт</button>
      <button class="pause-btn" onclick="pauseTimer(10)">Пауза</button>
      <button class="reset-btn" onclick="resetTimer(10)">Сброс</button>
    </div>
  </div>
  <!--<div class="timer" id="timer11">
  <h2 class="timer-title"> # <span class="numbers">11</span> STD</h2>
    <div class="timer-display" id="display11">00:00:00</div>
    <div class="buttons">
      <button onclick="addMinute(11)">+1м</button>
      <button onclick="addTenMinutes(11)">+10м</button>
      <button onclick="addHour(11)">+1ч</button>
    </div>
    <div class="controls" style="display:flex; gap:5px;">
      <button class="start-btn" onclick="startTimer(11)">Старт</button>
      <button class="pause-btn" onclick="pauseTimer(11)">Пауза</button>
      <button class="reset-btn" onclick="resetTimer(11)">Сброс</button>
    </div>
  </div> -->
  <div class="timer" id="timer12">
  <h2 class="timer-title"> # <span class="numbers">12</span> STD</h2>
    <div class="timer-display" id="display12">00:00:00</div>
    <div class="buttons">
      <button onclick="addMinute(12)">+1м</button>
      <button onclick="addTenMinutes(12)">+10м</button>
      <button onclick="addHour(12)">+1ч</button>
    </div>
    <div class="controls" style="display:flex; gap:5px;">
      <button class="start-btn" onclick="startTimer(12)">Старт</button>
      <button class="pause-btn" onclick="pauseTimer(12)">Пауза</button>
      <button class="reset-btn" onclick="resetTimer(12)">Сброс</button>
    </div>
  </div>
  <div class="timer" id="timer13">
  <h2 class="timer-title"> # <span class="numbers">13</span> STD</h2>
    <div class="timer-display" id="display13">00:00:00</div>
    <div class="buttons">
      <button onclick="addMinute(13)">+1м</button>
      <button onclick="addTenMinutes(13)">+10м</button>
      <button onclick="addHour(13)">+1ч</button>
    </div>
    <div class="controls" style="display:flex; gap:5px;">
      <button class="start-btn" onclick="startTimer(13)">Старт</button>
      <button class="pause-btn" onclick="pauseTimer(13)">Пауза</button>
      <button class="reset-btn" onclick="resetTimer(13)">Сброс</button>
    </div>
  </div>
  <div class="timer" id="timer14">
  <h2 class="timer-title"> # <span class="numbers">14</span> STD</h2>
    <div class="timer-display" id="display14">00:00:00</div>
    <div class="buttons">
      <button onclick="addMinute(14)">+1м</button>
      <button onclick="addTenMinutes(14)">+10м</button>
      <button onclick="addHour(14)">+1ч</button>
    </div>
    <div class="controls" style="display:flex; gap:5px;">
      <button class="start-btn" onclick="startTimer(14)">Старт</button>
      <button class="pause-btn" onclick="pauseTimer(14)">Пауза</button>
      <button class="reset-btn" onclick="resetTimer(14)">Сброс</button>
    </div>
  </div>
  
  <div class="timer" id="timer15">
  <h2 class="timer-title"> # <span class="numbers">15</span> STD</h2>
    <div class="timer-display" id="display15">00:00:00</div>
    <div class="buttons">
      <button onclick="addMinute(15)">+1м</button>
      <button onclick="addTenMinutes(15)">+10м</button>
      <button onclick="addHour(15)">+1ч</button>
    </div>
    <div class="controls" style="display:flex; gap:5px;">
      <button class="start-btn" onclick="startTimer(15)">Старт</button>
      <button class="pause-btn" onclick="pauseTimer(15)">Пауза</button>
      <button class="reset-btn" onclick="resetTimer(15)">Сброс</button>
    </div>
  </div>

  <div class="timer" id="timer16">
  <h2 class="timer-title"> # <span class="numbers">16</span> STD</h2>
    <div class="timer-display" id="display16">00:00:00</div>
    <div class="buttons">
      <button onclick="addMinute(16)">+1м</button>
      <button onclick="addTenMinutes(16)">+10м</button>
      <button onclick="addHour(16)">+1ч</button>
    </div>
    <div class="controls" style="display:flex; gap:5px;">
      <button class="start-btn" onclick="startTimer(16)">Старт</button>
      <button class="pause-btn" onclick="pauseTimer(16)">Пауза</button>
      <button class="reset-btn" onclick="resetTimer(16)">Сброс</button>
    </div>
  </div>

 <!-- <div class="timer" id="timer17">
  <h2 class="timer-title"> # <span class="numbers">17</span> STD</h2>
    <div class="timer-display" id="display17">00:00:00</div>
    <div class="buttons">
      <button onclick="addMinute(17)">+1м</button>
      <button onclick="addHour(17)">+1ч</button>
    </div>
    <div class="controls" style="display:flex; gap:5px;">
      <button class="start-btn" onclick="startTimer(17)">Старт</button>
      <button class="pause-btn" onclick="pauseTimer(17)">Пауза</button>
      <button class="reset-btn" onclick="resetTimer(17)">Сброс</button>
    </div>
  </div>-->

  <!--<div class="timer" id="timer18">
  <h2 class="timer-title"> # <span class="numbers">18</span> STD</h2>
    <div class="timer-display" id="display18">00:00:00</div>
    <div class="buttons">
      <button onclick="addMinute(18)">+1м</button>
      <button onclick="addHour(18)">+1ч</button>
    </div>
    <div class="controls" style="display:flex; gap:5px;">
      <button class="start-btn" onclick="startTimer(18)">Старт</button>
      <button class="pause-btn" onclick="pauseTimer(18)">Пауза</button>
      <button class="reset-btn" onclick="resetTimer(18)">Сброс</button>
    </div>
  </div>-->

  <!--<div class="timer" id="timer19">
  <h2 class="timer-title"> # <span class="numbers">19</span> STD</h2>
    <div class="timer-display" id="display19">00:00:00</div>
    <div class="buttons">
      <button onclick="addMinute(19)">+1м</button>
      <button onclick="addHour(19)">+1ч</button>
    </div>
    <div class="controls" style="display:flex; gap:5px;">
      <button class="start-btn" onclick="startTimer(19)">Старт</button>
      <button class="pause-btn" onclick="pauseTimer(19)">Пауза</button>
      <button class="reset-btn" onclick="resetTimer(19)">Сброс</button>
    </div>
  </div>-->
   

 
  
  </div>

  </div>


  <!-- Остальные таймеры по аналогии -->
</div>

<script>

const STORAGE_KEY = 'timers_state_v1';
const timers = [];

// Инициализация массива timers
for (let i = 1; i <= 20; i++) {
  timers[i] = {
    initialSeconds: 0,
    pausedSeconds: 0,
    startTimestamp: null,
    isRunning: false,
    intervalId: null
  };
}

// Загрузка состояния из localStorage
function loadState() {
  const raw = localStorage.getItem(STORAGE_KEY);
  if (!raw) return;

  try {
    const saved = JSON.parse(raw);
    for (let i = 1; i <= 20; i++) {
      if (!saved[i]) continue;
      timers[i].initialSeconds = saved[i].initialSeconds || 0;
      timers[i].pausedSeconds = saved[i].pausedSeconds || 0;
      timers[i].startTimestamp = saved[i].startTimestamp || null;
      timers[i].isRunning = saved[i].isRunning || false;
    }
  } catch (e) {
    console.error('Ошибка чтения состояния таймеров:', e);
  }
}

// Сохранение состояния в localStorage
function saveState() {
  const toSave = {};
  for (let i = 1; i <= 20; i++) {
    toSave[i] = {
      initialSeconds: timers[i].initialSeconds,
      pausedSeconds: timers[i].pausedSeconds,
      startTimestamp: timers[i].startTimestamp,
      isRunning: timers[i].isRunning
    };
  }
  localStorage.setItem(STORAGE_KEY, JSON.stringify(toSave));
}

function formatTimeFromSeconds(seconds) {
  const absSeconds = Math.abs(seconds);
  const hours = Math.floor(absSeconds / 3600);
  const minutes = Math.floor((absSeconds % 3600) / 60);
  const secs = absSeconds % 60;
  const sign = seconds < 0 ? '-' : '';

  return (
    sign +
    hours.toString().padStart(2, '0') + ':' +
    minutes.toString().padStart(2, '0') + ':' +
    secs.toString().padStart(2, '0')
  );
}

function updateDisplay(id) {
  const t = timers[id];

  let elapsedSeconds = t.pausedSeconds;
  if (t.isRunning && t.startTimestamp !== null) {
    const now = Date.now();
    const diffMs = now - t.startTimestamp;
    elapsedSeconds += Math.floor(diffMs / 1000);
  }

  const remainingSeconds = t.initialSeconds - elapsedSeconds;

  const displayEl = document.getElementById(`display${id}`);
  if (displayEl) {
    displayEl.textContent = formatTimeFromSeconds(remainingSeconds);
  }

  const block = document.getElementById(`timer${id}`);
  if (block) {
    if (remainingSeconds > 0 && remainingSeconds < 600) {
      block.style.backgroundColor = 'red';
    } else if (remainingSeconds < 0) {
      block.style.backgroundColor = 'red';
    } else {
      block.style.backgroundColor = '';
    }
  }
}

// +1мута
function addMinute(id) {
  const t = timers[id];
  t.initialSeconds += 60;
  saveState();
  updateDisplay(id);
}

// +1ч
function addHour(id) {
  const t = timers[id];
  t.initialSeconds += 3600;
  saveState();
  updateDisplay(id);
}
function addTenMinutes(id) {
  const t = timers[id];
  t.initialSeconds += 600;
  saveState();
  updateDisplay(id);
}

// Старт
function startTimer(id) {
  const t = timers[id];
  if (t.isRunning) return;

  t.isRunning = true;

  // если до этого уже шёл таймер, но страница перезагружалась,
  // startTimestamp мог быть в прошлом — обновим его на сеч,
  // но учтём уже прошедшее в pausedSeconds
  t.startTimestamp = Date.now();

  t.intervalId = setInterval(() => {
    updateDisplay(id);
  }, 200);

  saveState();
  updateDisplay(id);
}

// Пауза
function pauseTimer(id) {
  const t = timers[id];
  if (!t.isRunning) return;

  if (t.startTimestamp !== null) {
    const now = Date.now();
    const diffMs = now - t.startTimestamp;
    t.pausedSeconds += Math.floor(diffMs / 1000);
  }

  t.isRunning = false;
  t.startTimestamp = null;

  if (t.intervalId !== null) {
    clearInterval(t.intervalId);
    t.intervalId = null;
  }

  saveState();
  updateDisplay(id);
}

// Сброс
function resetTimer(id) {
  const t = timers[id];

  if (t.intervalId !== null) {
    clearInterval(t.intervalId);
    t.intervalId = null;
  }

  t.initialSeconds = 0;
  t.pausedSeconds = 0;
  t.startTimestamp = null;
  t.isRunning = false;

  saveState();
  updateDisplay(id);
}

// Восстановление при загрузке страницы
window.addEventListener('load', () => {
  loadState();

  // Для всех таймеров, которые были "запущены", нужно снова запустить setInterval
  for (let i = 1; i <= 20; i++) {
    const t = timers[i];

    // Если таймер был запущен до перезагрузки
    if (t.isRunning) {
      // Ничего не трогаем в pausedSeconds и initialSeconds,
      // просто считаем, что он продолжает идти с момента сохранённого startTimestamp.
      // Но важно: startTimestamp был сохранён как число (ms).
      t.intervalId = setInterval(() => {
        updateDisplay(i);
      }, 200);
    }

    // Обновим отображение для всех
    updateDisplay(i);
  }
});






</script>
version2.5
</body>
</html>



